function BXOnInviteListChange(){window.arInvitationUsersList=arguments[0];BX.onCustomEvent("onInvitationUsersListChange",[BX.util.array_values(window.arInvitationUsersList)])}function BXSwitchExtranet(e){if(BX("INVITE_EXTRANET_block")){if(e){BX("INVITE_EXTRANET_block").style.display="block"}else{BX("INVITE_EXTRANET_block").style.display="none"}}if(BX("GROUP_OPENED_block")&&BX("GROUP_OPENED")){if(e){BX("GROUP_OPENED").checked=false;BX("GROUP_OPENED").disabled=true;BX.addClass(BX("GROUP_OPENED_block"),"sonet-group-create-popup-checkbox-disabled")}else{BX("GROUP_OPENED").disabled=true;BX("GROUP_OPENED_block").style.display="block";BX.addClass(BX("GROUP_OPENED_block"),"sonet-group-create-popup-checkbox-disabled")}}if(BX("GROUP_VISIBLE_block")&&BX("GROUP_VISIBLE")){if(e){BX("GROUP_VISIBLE").checked=false;BX("GROUP_VISIBLE").disabled=true;BX.addClass(BX("GROUP_VISIBLE_block"),"sonet-group-create-popup-checkbox-disabled")}else{BX("GROUP_VISIBLE").disabled=false;BX("GROUP_VISIBLE_block").style.display="block";BX.removeClass(BX("GROUP_VISIBLE_block"),"sonet-group-create-popup-checkbox-disabled")}}if(BX("GROUP_INITIATE_PERMS")&&BX("GROUP_INITIATE_PERMS_OPTION_E")&&BX("GROUP_INITIATE_PERMS_OPTION_K")){if(e)BX("GROUP_INITIATE_PERMS_OPTION_E").selected=true;else BX("GROUP_INITIATE_PERMS_OPTION_K").selected=true}if(BX("USERS_employee_section_extranet")){if(e)BX("USERS_employee_section_extranet").style.display="inline-block";else BX("USERS_employee_section_extranet").style.display="none"}}function BXSwitchNotVisible(e){if(e){BX("GROUP_OPENED").disabled=false;BX.removeClass(BX("GROUP_OPENED_block"),"sonet-group-create-popup-checkbox-disabled")}else{BX("GROUP_OPENED").disabled=true;BX("GROUP_OPENED").checked=false;BX.addClass(BX("GROUP_OPENED_block"),"sonet-group-create-popup-checkbox-disabled")}}function BXDeleteImage(){if(BX("sonet_group_create_tabs_image_block")&&BX("GROUP_IMAGE_ID_DEL")){BX("sonet_group_create_tabs_image_block").style.visibility="hidden";BX("GROUP_IMAGE_ID_DEL").value="Y";if(BX("file_input_GROUP_IMAGE_ID"))BX("file_input_GROUP_IMAGE_ID").value="";if(BX("file_input_upload_list_GROUP_IMAGE_ID")){var e=BX.findChild(BX("file_input_upload_list_GROUP_IMAGE_ID"),{tagName:"input",attr:{name:"GROUP_IMAGE_ID"}},true,false);if(e)e.value=""}}}function BXGCESwitchTabs(){var e=BX.findChildren(BX("sonet_group_create_popup"),{className:"sonet-group-create-popup-tab"},true);var t=BX.findChildren(BX("sonet_group_create_tabs_content"),{tagName:"div"},false);BX.bind(BX.findChild(BX("sonet_group_create_popup"),{className:"sonet-group-create-popup-tabs-block"},true,false),"click",function(o){o=o||window.event;var a=o.target||o.srcElement;var s=null;var n=null;for(var i=0;i<t.length;i++){if(t[i].style.display!="none"){s=t[i];var r=BX.pos(s);var p=BX("sonet_group_create_tabs_content");p.style.height=r["height"]+"px";p.style.overflow="hidden";break}}if(BX.hasClass(BX(a),"sonet-group-create-popup-tab")||BX.hasClass(BX(a.parentNode),"sonet-group-create-popup-tab")){for(var i=0;i<e.length;i++){BX.removeClass(e[i],"sonet-group-create-popup-tab-active");t[i].style.display="none";if(e[i]==a||e[i]==a.parentNode){BX.addClass(e[i],"sonet-group-create-popup-tab-active");n=t[i]}}if(s&&n&&p){if(s.id!=n.id){n.style.display="block";var _=BX.pos(n);new BX.fx({time:.5,step:.05,type:"linear",start:r["height"],finish:_["height"],callback:BX.delegate(function(e){this.style.height=e+"px"},p),callback_complete:BX.delegate(function(){this.style.height="auto";this.style.overflow="visible"},p)}).start()}else{n.style.display="block";p.style.overflow="visible"}}}})}function BXGCESwitchFeatures(){var e=BX("sonet_group_create_tabs_features");if(e){var t=BX.findChildren(e,{className:"sonet-group-create-popup-feature"},true);var o=BX.findChildren(e,{className:"sonet-group-create-popup-feature-hidden"},true);BX.bind(e,"click",function(e){e=e||window.event;var a=e.target||e.srcElement;for(var s=0;s<t.length;s++){if(a==t[s]||a.parentNode==t[s]){BX.toggleClass(t[s],"sonet-group-create-popup-feature-active");if(BX.hasClass(t[s],"sonet-group-create-popup-feature-active"))o[s].value="Y";else o[s].value="";break}}})}}function BXGCESubmitForm(e){var t=BX("GROUP_DESCRIPTION");if(t&&t.value==BX.message("SONET_GCE_T_DESCR")){t.value=""}if(BX("EXTRANET_INVITE_ACTION")){BX("EXTRANET_INVITE_ACTION").value=BX.BXGCE.lastAction}var o=BX("sonet_group_create_popup_form").action;obRequestData={ajax_request:"Y",sessid:BX.bitrix_sessid(),save:"Y"};var a=document.forms.sonet_group_create_popup_form.getElementsByTagName("input");for(var s=0;s<a.length;s++){if(a[s].type=="checkbox"||a[s].type=="radio"){if(a[s].checked){BX.BXGCE.setRequestField(obRequestData,a[s].name,a[s].value)}}else{BX.BXGCE.setRequestField(obRequestData,a[s].name,a[s].value)}}var n=document.forms.sonet_group_create_popup_form.getElementsByTagName("textarea");for(var s=0;s<n.length;s++){BX.BXGCE.setRequestField(obRequestData,n[s].name,n[s].value)}var i=document.forms.sonet_group_create_popup_form.getElementsByTagName("select");for(var s=0;s<i.length;s++){obRequestData[i[s].name]=undefined;for(var r=0;r<i[s].options.length;r++){if(i[s].options[r].selected){if(i[s].options[r].value.length>0){BX.BXGCE.setRequestField(obRequestData,i[s].name,i[s].options[r].value)}}}}if(obRequestData&&o){BX.BXGCE.disableSubmitButton(true);BX.ajax({url:o,method:"POST",dataType:"json",data:obRequestData,onsuccess:function(e){if(e["ERROR"]!==undefined&&e["ERROR"].length>0){BX.BXGCE.showError((e["WARNING"]!==undefined&&e["WARNING"].length>0?e["WARNING"]+"<br>":"")+e["ERROR"]);if(typeof BX.SocNetLogDestination.obItems!=="undefined"&&e["USERS_ID"]!==undefined&&BX.type.isArray(e["USERS_ID"])){var t=false;var o=[];var a=false;for(var s=0;s<e["USERS_ID"].length;s++){o["U"+e["USERS_ID"][s]]="users"}if(BX.BXGCE.arUserSelector.length>0){for(var n=0;n<BX.BXGCE.arUserSelector.length;n++){t=BX.findChildren(BX("sonet_group_create_popup_users_item_post_"+BX.BXGCE.arUserSelector[n]),{className:"feed-add-post-destination-users"},true);if(t){for(var s=0;s<t.length;s++){a=t[s].getAttribute("data-id");if(a&&a.length>0){BX.SocNetLogDestination.deleteItem(a,"users",BX.BXGCE.arUserSelector[n])}}}BX.SocNetLogDestination.obItemsSelected[BX.BXGCE.arUserSelector[n]]=o;BX.SocNetLogDestination.reInit(BX.BXGCE.arUserSelector[n])}}}BX.BXGCE.disableSubmitButton(false)}else if(e["MESSAGE"]=="SUCCESS"){top.BX.onCustomEvent("onSonetIframeSuccess");if(typeof e["URL"]!=="undefined"&&e["URL"].length>0){top.location.href=e["URL"]}else{BX.reload()}}},onfailure:function(e){BX.BXGCE.disableSubmitButton(false);BX.BXGCE.showError(e["ERROR"])}})}BX.PreventDefault(e)}function onCancelClick(e){top.BX.onCustomEvent("onSonetIframeCancelClick");return BX.PreventDefault(e)}function __addExtranetEmail(){var e=BX("sonet_group_create_popup_form_email_input");if(e.value=="e-mail"||e.value=="")return;var t=/^[a-zA-Z0-9._\-+~'=]+@[a-zA-Z0-9._-]+\.[a-zA-Z]{2,9}$/;if(t.test(e.value)){if(top.BXExtranetMailList.length>0){for(var o=0;o<top.BXExtranetMailList.length;o++){if(top.BXExtranetMailList[o]==e.value){BX("sonet_group_create_popup_form_email_"+(o+1)).style.background="none";setTimeout(function(){BX("sonet_group_create_popup_form_email_"+(o+1)).style.backgroundColor="#E1E9F6"},150);setTimeout(function(){BX("sonet_group_create_popup_form_email_"+(o+1)).style.background="none"},300);setTimeout(function(){BX("sonet_group_create_popup_form_email_"+(o+1)).style.backgroundColor="#E1E9F6"},450);return}}}var a=BX.create("a",{props:{className:"sonet-group-create-popup-form-email",id:"sonet_group_create_popup_form_email_"+(top.BXExtranetMailList.length+1),href:"javascript:void(0)"},children:[BX("sonet_group_create_popup_form_email_input").value,BX.create("a",{props:{className:"sonet-group-create-popup-del",href:"javascript:void(0)"},events:{click:__deleteExtranetEmail}})]});BX("sonet_group_create_popup_form_email_bl").appendChild(a);if(BX("EMAILS").value.length>0)BX("EMAILS").value+=", ";BX("EMAILS").value+=BX("sonet_group_create_popup_form_email_input").value;BX.removeClass(e,"sonet-group-create-popup-form-email-error");e.value="";top.BXExtranetMailList.push(e.value)}else{if(BX.browser.IsIE()){e.focus();e.value=e.value}e.focus();BX.addClass(e,"sonet-group-create-popup-form-email-error")}}function __deleteExtranetEmail(e){var t=false;if(!e||!BX.type.isDomNode(e))e=this;if(e){BX(e).parentNode.parentNode.removeChild(BX(e).parentNode);var o=parseInt(BX(e).parentNode.id.substring(36));top.BXExtranetMailList[o-1]="";BX("EMAILS").value="";for(var a=0;a<top.BXExtranetMailList.length;a++){if(top.BXExtranetMailList[a].length>0){if(t)BX("EMAILS").value+=", ";BX("EMAILS").value+=top.BXExtranetMailList[a];var t=true}}}}function BXGCEEmailKeyDown(e){e=e||window.event;BX.removeClass(this,"sonet-group-create-popup-form-email-error");if(e.keyCode==13)__addExtranetEmail()}(function(){if(!!BX.BXGCE){return}BX.BXGCE={userSelector:"",lastAction:"invite",arUserSelector:[]};BX.BXGCE.setSelector=function(e){BX.BXGCE.userSelector=e};BX.BXGCE.setLinkName=function(e){if(BX.SocNetLogDestination.getSelectedCount(e)<=0){BX("sonet_group_create_popup_users_tag_post_"+e).innerHTML=BX.message("SONET_GCE_T_DEST_LINK_1")}else{BX("sonet_group_create_popup_users_tag_post_"+e).innerHTML=BX.message("SONET_GCE_T_DEST_LINK_2")}};BX.BXGCE.disableBackspace=function(e){if(BX.SocNetLogDestination.backspaceDisable||BX.SocNetLogDestination.backspaceDisable!=null){BX.unbind(window,"keydown",BX.SocNetLogDestination.backspaceDisable)}BX.bind(window,"keydown",BX.SocNetLogDestination.backspaceDisable=function(e){if(e.keyCode==8){BX.PreventDefault(e);return false}});setTimeout(function(){BX.unbind(window,"keydown",BX.SocNetLogDestination.backspaceDisable);BX.SocNetLogDestination.backspaceDisable=null},5e3)};BX.BXGCE.selectCallback=function(e,t,o,a,s){if(!BX.findChild(BX("sonet_group_create_popup_users_item_post_"+s),{attr:{"data-id":e.id}},false,false)){BX("sonet_group_create_popup_users_item_post_"+s).appendChild(BX.create("span",{attrs:{"data-id":e.id},props:{className:"feed-add-post-destination feed-add-post-destination-users"},children:[BX.create("input",{attrs:{type:"hidden",name:"USER_CODES[]",value:e.id}}),BX.create("span",{props:{className:"feed-add-post-destination-text"},html:e.name}),BX.create("span",{props:{className:"feed-add-post-del-but"},events:{click:function(t){BX.SocNetLogDestination.deleteItem(e.id,"users",s);BX.PreventDefault(t)},mouseover:function(){BX.addClass(this.parentNode,"feed-add-post-destination-hover")},mouseout:function(){BX.removeClass(this.parentNode,"feed-add-post-destination-hover")}}})]}))}BX("sonet_group_create_popup_users_input_post_"+s).value="";BX.BXGCE.setLinkName(s)};BX.BXGCE.unSelectCallback=function(e,t,o){var a=BX.findChildren(BX("sonet_group_create_popup_users_item_post_"+BX.BXGCE.userSelector),{attribute:{"data-id":""+e.id+""}},true);if(a!=null){for(var s=0;s<a.length;s++){BX.remove(a[s])}}BX("sonet_group_create_popup_users_input_post_"+BX.BXGCE.userSelector).value="";BX.BXGCE.setLinkName(BX.BXGCE.userSelector)};BX.BXGCE.openDialogCallback=function(){BX.PopupWindow.setOptions({popupZindex:2100});BX.style(BX("sonet_group_create_popup_users_input_box_post_"+BX.BXGCE.userSelector),"display","inline-block");BX.style(BX("sonet_group_create_popup_users_tag_post_"+BX.BXGCE.userSelector),"display","none");BX.focus(BX("sonet_group_create_popup_users_input_post_"+BX.BXGCE.userSelector))};BX.BXGCE.closeDialogCallback=function(){if(!BX.SocNetLogDestination.isOpenSearch()&&BX("sonet_group_create_popup_users_input_post_"+BX.BXGCE.userSelector).value.length<=0){BX.style(BX("sonet_group_create_popup_users_input_box_post_"+BX.BXGCE.userSelector),"display","none");BX.BXGCE.disableBackspace()}};BX.BXGCE.searchBefore=function(e){if(e.keyCode==8&&BX("sonet_group_create_popup_users_input_post_"+BX.BXGCE.userSelector).value.length<=0){BX.SocNetLogDestination.sendEvent=false;BX.SocNetLogDestination.deleteLastItem(BX.BXGCE.userSelector)}return true};BX.BXGCE.search=function(e){if(e.keyCode==16||e.keyCode==17||e.keyCode==18||e.keyCode==20||e.keyCode==244||e.keyCode==224||e.keyCode==91){return false}if(e.keyCode==13){BX.SocNetLogDestination.selectFirstSearchItem(BX.BXGCE.userSelector);return true}if(e.keyCode==27){BX("sonet_group_create_popup_users_input_post_"+BX.BXGCE.userSelector).value="";BX.style(BX("sonet_group_create_popup_users_tag_post_"+BX.BXGCE.userSelector),"display","inline")}else{BX.SocNetLogDestination.search(BX("sonet_group_create_popup_users_input_post_"+BX.BXGCE.userSelector).value,true,BX.BXGCE.userSelector)}if(!BX.SocNetLogDestination.isOpenDialog()&&BX("sonet_group_create_popup_users_input_post_"+BX.BXGCE.userSelector).value.length<=0){BX.SocNetLogDestination.openDialog(BX.BXGCE.userSelector)}else{if(BX.SocNetLogDestination.sendEvent&&BX.SocNetLogDestination.isOpenDialog()){BX.SocNetLogDestination.closeDialog()}}if(e.keyCode==8){BX.SocNetLogDestination.sendEvent=true}return true};BX.BXGCE.bindActionLink=function(e){if(e===undefined||e==null){return}BX.bind(e,"click",function(t){BX.PopupMenu.destroy("invite-dialog-usertype-popup");var o=[{text:BX.message("SONET_GCE_T_DEST_EXTRANET_SELECTOR_INVITE"),id:"sonet_group_create_popup_action_invite",className:"menu-popup-no-icon",onclick:function(){BX.BXGCE.onActionSelect("invite")}},{text:BX.message("SONET_GCE_T_DEST_EXTRANET_SELECTOR_ADD"),id:"sonet_group_create_popup_action_add",className:"menu-popup-no-icon",onclick:function(){BX.BXGCE.onActionSelect("add")}}];var a={offsetLeft:-14,offsetTop:4,zIndex:1200,lightShadow:false,angle:{position:"top",offset:50},events:{onPopupShow:function(e){}}};BX.PopupMenu.show("sonet_group_create_popup_action_popup",e,o,a)})};BX.BXGCE.onActionSelect=function(e){if(e!="add"){e="invite"}BX.BXGCE.lastAction=e;BX("sonet_group_create_popup_action_title_link").innerHTML=BX.message("SONET_GCE_T_DEST_EXTRANET_SELECTOR_"+(e=="invite"?"INVITE":"ADD"));if(e=="invite"){BX("sonet_group_create_popup_action_block_invite").style.display="block";BX("sonet_group_create_popup_action_block_invite_2").style.display="block";BX("sonet_group_create_popup_action_block_add").style.display="none"}else{BX("sonet_group_create_popup_action_block_invite").style.display="none";BX("sonet_group_create_popup_action_block_invite_2").style.display="none";BX("sonet_group_create_popup_action_block_add").style.display="block"}BX("sonet_group_create_popup_action_block_"+e).style.display="block";BX("sonet_group_create_popup_action_block_"+(e=="invite"?"add":"invite")).style.display="none";BX.PopupMenu.destroy("sonet_group_create_popup_action_popup")};BX.BXGCE.showError=function(e){if(BX("sonet_group_create_error_block_content")){BX("sonet_group_create_error_block_content").innerHTML=e;if(BX("sonet_group_create_error_block")){BX("sonet_group_create_error_block").style.display="block"}}};BX.BXGCE.showMessage=function(){};BX.BXGCE.disableSubmitButton=function(e){e=!!e;var t=BX("sonet_group_create_popup_form_button_submit");if(t){if(e){BX.addClass(t,"popup-window-button-disabled");t.style.cursor="auto";BX.unbind(t,"click",BXGCESubmitForm)}else{BX.removeClass(t,"popup-window-button-disabled");t.style.cursor="pointer";BX.bind(t,"click",BXGCESubmitForm)}}};BX.BXGCE.setRequestField=function(e,t,o){t=t.replace("[]","");if(typeof e[t]!=="undefined"){if(typeof e[t]==="object"){e[t].push(o)}else{var a=e[t];e[t]=[];e[t].push(a);e[t].push(o)}}else{e[t]=o}}})();
//# sourceMappingURL=script.map.js